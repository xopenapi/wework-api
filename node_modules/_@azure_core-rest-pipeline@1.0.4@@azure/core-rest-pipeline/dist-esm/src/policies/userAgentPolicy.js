// Copyright (c) Microsoft Corporation.
// Licensed under the MIT license.
import { __awaiter } from "tslib";
import { getUserAgentValue, getUserAgentHeaderName } from "../util/userAgent";
const UserAgentHeaderName = getUserAgentHeaderName();
/**
 * The programmatic identifier of the userAgentPolicy.
 */
export const userAgentPolicyName = "userAgentPolicy";
/**
 * A policy that sets the User-Agent header (or equivalent) to reflect
 * the library version.
 * @param options - Options to customize the user agent value.
 */
export function userAgentPolicy(options = {}) {
    const userAgentValue = getUserAgentValue(options.userAgentPrefix);
    return {
        name: userAgentPolicyName,
        sendRequest(request, next) {
            return __awaiter(this, void 0, void 0, function* () {
                if (!request.headers.has(UserAgentHeaderName)) {
                    request.headers.set(UserAgentHeaderName, userAgentValue);
                }
                return next(request);
            });
        }
    };
}
//# sourceMappingURL=userAgentPolicy.js.map