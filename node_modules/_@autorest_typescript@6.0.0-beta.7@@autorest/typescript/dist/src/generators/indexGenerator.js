"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateIndexFile = void 0;
const autorestSession_1 = require("../autorestSession");
function generateIndexFile(clientDetails, project) {
    const { srcPath, disablePagingAsyncIterators } = autorestSession_1.getAutorestOptions();
    const indexFile = project.createSourceFile(`${srcPath}/index.ts`, undefined, {
        overwrite: true
    });
    if (clientDetails.options.hasPaging && !disablePagingAsyncIterators) {
        indexFile.addStatements([`/// <reference lib="esnext.asynciterable" />`]);
    }
    indexFile.addExportDeclarations([
        {
            moduleSpecifier: "./models"
        },
        {
            moduleSpecifier: `./${clientDetails.sourceFileName}`,
            namedExports: [clientDetails.className]
        },
        {
            moduleSpecifier: `./${clientDetails.sourceFileName}Context`,
            namedExports: [`${clientDetails.className}Context`]
        }
    ]);
    const operationGroups = clientDetails.operationGroups.filter(og => !og.isTopLevel);
    if (operationGroups.length) {
        indexFile.addExportDeclarations([
            {
                moduleSpecifier: "./operationsInterfaces"
            }
        ]);
    }
    indexFile.fixUnusedIdentifiers();
}
exports.generateIndexFile = generateIndexFile;
//# sourceMappingURL=indexGenerator.js.map